<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ff4d6d" />
  <title>Pour Apo â¤ï¸</title>
  <style>
    :root{
      --bg1:#0b1020; --bg2:#1a0f1d;
      --txt:#f8f7ff; --muted:rgba(248,247,255,.75);
      --pink:#ff4d6d; --pink2:#ff7aa2;
      --border:rgba(255,255,255,.16);
      --shadow: 0 20px 70px rgba(0,0,0,.55);
      --r: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--txt);
      background: radial-gradient(1200px 700px at 15% 10%, rgba(255,77,109,.22), transparent 60%),
                  radial-gradient(900px 600px at 85% 20%, rgba(255,122,162,.18), transparent 55%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .glow{position:fixed; inset:-80px; pointer-events:none; opacity:.55; filter: blur(30px); z-index:0;}
    .glow::before{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(600px 420px at 20% 20%, rgba(255,77,109,.22), transparent 60%),
        radial-gradient(540px 420px at 85% 25%, rgba(255,122,162,.18), transparent 60%),
        radial-gradient(520px 380px at 55% 85%, rgba(255,255,255,.08), transparent 60%);
      animation: floaty 12s ease-in-out infinite;
    }
    @keyframes floaty{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(-10px,14px,0)}}

    .stars{position:fixed; inset:0; pointer-events:none; opacity:.8; z-index:1;}
    .stars::before, .stars::after{
      content:""; position:absolute; inset:-200px;
      background-image:
        radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.7) 50%, transparent 55%),
        radial-gradient(1px 1px at 140px 120px, rgba(255,255,255,.55) 50%, transparent 55%),
        radial-gradient(1px 1px at 240px 80px, rgba(255,255,255,.45) 50%, transparent 55%),
        radial-gradient(2px 2px at 320px 220px, rgba(255,255,255,.65) 50%, transparent 55%),
        radial-gradient(1px 1px at 420px 160px, rgba(255,255,255,.45) 50%, transparent 55%),
        radial-gradient(1px 1px at 520px 60px, rgba(255,255,255,.35) 50%, transparent 55%),
        radial-gradient(2px 2px at 620px 240px, rgba(255,255,255,.55) 50%, transparent 55%),
        radial-gradient(1px 1px at 740px 140px, rgba(255,255,255,.45) 50%, transparent 55%),
        radial-gradient(1px 1px at 860px 200px, rgba(255,255,255,.35) 50%, transparent 55%),
        radial-gradient(2px 2px at 980px 80px, rgba(255,255,255,.6) 50%, transparent 55%);
      background-size: 1000px 350px;
      animation: drift 18s linear infinite;
      opacity:.55;
    }
    .stars::after{animation-duration: 28s; opacity:.35; transform: translate3d(0,-60px,0) scale(1.2)}
    @keyframes drift{from{transform:translate3d(0,0,0)} to{transform:translate3d(-140px,120px,0)}}

    canvas#fx{position:fixed; inset:0; pointer-events:none; z-index:2;}

    .wrap{position:relative; min-height:100%; z-index:3;}
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(14px);
      background: linear-gradient(to bottom, rgba(11,16,32,.72), rgba(11,16,32,.25));
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .topbar{
      max-width:1100px; margin:0 auto; padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:900;}
    .brand .dot{
      width:12px;height:12px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, var(--pink));
      box-shadow: 0 0 0 6px rgba(255,77,109,.12);
    }
    .controls{display:flex; gap:10px; align-items:center;}
    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--txt);
      padding:10px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:800;
      display:flex; align-items:center; gap:8px;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
      user-select:none;
    }
    .pill:hover{transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.24)}
    .pill:active{transform: translateY(0)}

    main{max-width:1100px; margin:0 auto; padding:36px 18px 90px;}
    .hero{display:grid; grid-template-columns: 1.2fr .8fr; gap:18px; align-items:stretch;}
    @media (max-width: 900px){.hero{grid-template-columns:1fr;}}

    .card{
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(600px 220px at 20% 0%, rgba(255,77,109,.25), transparent 60%),
                  radial-gradient(500px 260px at 90% 20%, rgba(255,122,162,.18), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }
    .pad{position:relative; padding:22px;}
    .kicker{color:var(--muted); font-weight:800; letter-spacing:.16em; text-transform:uppercase; font-size:.78rem;}
    h1{margin:10px 0 8px; font-size: clamp(1.9rem, 3.6vw, 3rem); line-height:1.08;}
    .sub{color:var(--muted); font-size:1.02rem; line-height:1.6; margin:0 0 18px;}

    .type{
      font-weight:1000;
      background: linear-gradient(90deg, #fff, var(--pink2));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .cursor{display:inline-block; width:10px; height:1.1em; margin-left:6px; transform: translateY(3px);
      background: rgba(255,255,255,.75); animation: blink 1s steps(1) infinite; border-radius:2px;}
    @keyframes blink{50%{opacity:.08}}

    .btns{display:flex; flex-wrap:wrap; gap:10px;}
    .btn{
      border:none;
      background: linear-gradient(90deg, var(--pink), var(--pink2));
      color:#1a0f1d;
      padding:12px 14px;
      border-radius:14px;
      cursor:pointer;
      font-weight:1000;
      box-shadow: 0 14px 40px rgba(255,77,109,.22);
      transition: transform .18s ease, filter .18s ease;
    }
    .btn:hover{transform: translateY(-1px); filter: brightness(1.03)}
    .ghost{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color:var(--txt);
      padding:12px 14px;
      border-radius:14px;
      cursor:pointer;
      font-weight:900;
    }
    .hint{color:rgba(248,247,255,.55); font-size:.88rem; margin-top:10px}

    .note{margin-top:10px; padding:14px; background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.14); border-radius: 16px; color: var(--muted); line-height:1.6;}
    .grid{margin-top:18px; display:grid; grid-template-columns: 1fr 1fr; gap:18px;}
    @media (max-width: 900px){.grid{grid-template-columns:1fr;}}

    .gallery{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;}
    @media (max-width: 900px){.gallery{grid-template-columns: repeat(2, 1fr);}}
    @media (max-width: 460px){.gallery{grid-template-columns: 1fr;}}

    .ph{
      aspect-ratio: 4 / 3;
      border-radius: 18px;
      border:1px dashed rgba(255,255,255,.22);
      background: rgba(255,255,255,.04);
      display:grid; place-items:center;
      color: rgba(248,247,255,.65);
      font-weight:900;
      position:relative; overflow:hidden;
    }
    .ph::before{
      content:""; position:absolute; inset:-2px;
      background: radial-gradient(400px 220px at 30% 10%, rgba(255,77,109,.18), transparent 55%),
                  radial-gradient(420px 260px at 80% 30%, rgba(255,122,162,.14), transparent 55%);
      opacity: .9; pointer-events:none;
    }

    /* modal */
    .overlay{position:fixed; inset:0; background: rgba(0,0,0,.6); backdrop-filter: blur(10px); display:none; align-items:center; justify-content:center; padding:18px; z-index:999;}
    .overlay.show{display:flex;}
    .modal{width:min(760px, 100%); border-radius: 26px; border:1px solid rgba(255,255,255,.18); background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.07)); box-shadow: 0 30px 100px rgba(0,0,0,.6); overflow:hidden;}
    .modal .head{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:16px 18px; border-bottom:1px solid rgba(255,255,255,.12);}
    .x{width:42px;height:42px; border-radius: 14px; border:1px solid rgba(255,255,255,.18); background: rgba(255,255,255,.06); color:var(--txt); cursor:pointer; font-weight:1000;}
    .modal .body{padding:18px; color:var(--muted); line-height:1.7; font-size:1.02rem;}
    .signature{margin-top:14px; color:rgba(248,247,255,.88); font-weight:1000}

    /* ğŸ”’ gate */
    .gate{
      position:fixed; inset:0; z-index:1000;
      display:flex; align-items:center; justify-content:center; padding:18px;
      background: radial-gradient(900px 500px at 20% 10%, rgba(255,77,109,.22), transparent 60%),
                  radial-gradient(800px 520px at 80% 20%, rgba(255,122,162,.18), transparent 60%),
                  rgba(0,0,0,.62);
      backdrop-filter: blur(14px);
    }
    .gate.hide{display:none;}
    .gate-card{
      width:min(520px, 100%);
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: 0 30px 110px rgba(0,0,0,.7);
      padding:20px; position:relative; overflow:hidden;
    }
    .gate-card::before{
      content:""; position:absolute; inset:-1px;
      background: radial-gradient(600px 220px at 20% 0%, rgba(255,77,109,.28), transparent 60%),
                  radial-gradient(520px 240px at 90% 20%, rgba(255,122,162,.20), transparent 60%);
      opacity:.95; pointer-events:none;
    }
    .gate-card > *{position:relative;}
    .gate-badge{
      width:54px; height:54px; border-radius: 18px; display:grid; place-items:center;
      background: rgba(255,77,109,.18); border:1px solid rgba(255,77,109,.40);
      box-shadow: 0 18px 60px rgba(255,77,109,.22);
      font-size:1.25rem;
    }
    .gate-card h2{margin:12px 0 8px; font-size:1.55rem;}
    .gate-card p{margin:0 0 14px; color:rgba(248,247,255,.75); line-height:1.6;}
    .gate-row{display:flex; gap:10px; align-items:center;}
    .gate-row input{
      flex:1; padding:12px 12px; border-radius: 16px; border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.22); color: var(--txt); outline:none; font-weight:900; letter-spacing:.2px;
    }
    .gate-row button{
      padding:12px 14px; border-radius: 16px; border:none;
      background: linear-gradient(90deg, var(--pink), var(--pink2));
      color:#1a0f1d; font-weight:1000; cursor:pointer; white-space:nowrap;
      box-shadow: 0 16px 60px rgba(255,77,109,.22);
    }
    .gate-hint{margin-top:10px; color:rgba(248,247,255,.60); font-size:.92rem;}
    .gate-error{margin-top:10px; color:rgba(255,200,210,.95); font-weight:1000; min-height:22px;}
    .shake{animation: shake .38s ease;}
    @keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-6px)}80%{transform:translateX(6px)}}
    .fadeOut{animation: fadeOut .55s ease forwards;}
    @keyframes fadeOut{to{opacity:0; transform: translateY(10px);}}

    @media (prefers-reduced-motion: reduce){
      .stars::before,.stars::after,.cursor,.glow::before{animation:none !important;}
    }
    .float-heart{
  position: fixed;
  left: 0; top: 0;
  z-index: 50;
  font-size: 22px;
  pointer-events: none;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
  animation: floatUp 1.8s ease forwards;
}
@keyframes floatUp{
  0%{ transform: translate(-50%,-50%) scale(.8); opacity: 0; }
  10%{ opacity: 1; }
  100%{ transform: translate(-50%,-170px) scale(1.25); opacity: 0; }
}
  </style>
</head>
<body>
  <div class="glow" aria-hidden="true"></div>
  <div class="stars" aria-hidden="true"></div>
  <canvas id="fx"></canvas>

  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand">
          <span class="dot"></span>
          <span id="brandText">Pour Apo â¤ï¸</span>
        </div>
        <div class="controls">
          <button class="pill" id="btnHearts">ğŸ’˜ CÅ“urs</button>
          <button class="pill" id="btnMusic">ğŸµ Musique</button>
        </div>
      </div>
    </header>

    <!-- ğŸ”’ Portail -->
    <div class="gate" id="gate">
      <div class="gate-card">
        <div class="gate-badge">ğŸ”’</div>
        <h2>AccÃ¨s privÃ©</h2>
        <p>Ce petit site est rÃ©servÃ© Ã  <strong id="gateName">Apo</strong>.<br>Entre le mot de passe pour ouvrir la surprise âœ¨</p>
        <div class="gate-row">
          <input id="gateInput" type="password" autocomplete="off" placeholder="Mot de passe" />
          <button id="gateBtn">Ouvrir ğŸ’—</button>
        </div>
        <div class="gate-hint" id="gateHint"></div>
        <div class="gate-error" id="gateError"></div>
        <div class="hint">Astuce : active la musique en haut quand câ€™est ouvert ğŸµ</div>
      </div>
    </div>

    <main>
      <section class="hero">
        <div class="card">
          <div class="pad">
            <div class="kicker">Un message rien que pour toi</div>
            <h1>
              <span id="toName">Apo</span>,
              <span class="type" id="typed">jâ€™ai un truc Ã  te dire</span><span class="cursor" aria-hidden="true"></span>
            </h1>
            <p class="sub" id="subtitle">Jâ€™ai fait ce petit site comme une surprise. Un seul objectif : te faire sourireâ€¦ et te rappeler Ã  quel point tu comptes pour moi.</p>
            <div class="btns">
              <button class="btn" id="btnOpen">Ouvre mon message ğŸ’Œ</button>
              <button class="ghost" id="btnScroll">Descends â†“</button>
            </div>
            <div class="hint">Clique sur lâ€™Ã©cran pour faire apparaÃ®tre des cÅ“urs ğŸ’—</div>
          </div>
        </div>

        <div class="card">
          <div class="pad">
            <div class="kicker">Nous</div>
            <h2 style="margin:10px 0 8px; font-size:1.45rem;">
              <span id="pairA">Apo</span> Ã— <span id="pairB">Nadhem</span>
            </h2>
            <div class="note" id="quickNote">Apo, tâ€™es ma personne prÃ©fÃ©rÃ©e. Je pense Ã  toi, tout le temps.</div>
          </div>
        </div>
      </section>

      <section class="grid">
        <div class="card">
          <div class="pad">
            <div class="kicker">Mini galerie</div>
            <div class="gallery" style="margin-top:12px" id="gallery">
              <div class="ph" data-i="1">Photo 1</div>
              <div class="ph" data-i="2">Photo 2</div>
              <div class="ph" data-i="3">Photo 3</div>
              <div class="ph" data-i="4">Photo 4</div>
              <div class="ph" data-i="5">Photo 5</div>
              <div class="ph" data-i="6">Photo 6</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="pad">
            <div class="kicker">Une promesse</div>
            <p class="sub" id="promise" style="margin-top:10px">
              Peu importe la distance, la fatigue, ou les journÃ©es compliquÃ©es : je veux Ãªtre lÃ , te soutenir, te faire rire, et tâ€™aimer correctement.
              Et si un jour tu doutes, tu reviens iciâ€¦ et tu relis.
            </p>
          </div>
        </div>
      </section>
    </main>

    <!-- MODAL -->
    <div class="overlay" id="overlay" role="dialog" aria-modal="true">
      <div class="modal">
        <div class="head">
          <div style="font-weight:1000">ğŸ’Œ Mon message</div>
          <button class="x" id="btnClose">âœ•</button>
        </div>
        <div class="body">
          <div id="loveBody"></div>
          <div class="signature">â€” <span id="sig"></span></div>
        </div>
      </div>
    </div>

    <!-- Musique optionnelle (si tu ajoutes un fichier music.mp3 dans le repo) -->
    <audio id="musicFile" src="music.mp3" preload="auto"></audio>
  </div>

  <script>
    // âœ… CONFIG (modifie ici si tu veux)
    const CONFIG = {
      toName: "Apo",
      fromName: "Nadhem",
      brandText: "Pour Apo â¤ï¸",
      subtitle: "Jâ€™ai fait ce petit site comme une surprise. Un seul objectif : te faire sourireâ€¦ et te rappeler Ã  quel point tu comptes pour moi.",
      quickNote: "Apo, tâ€™es ma personne prÃ©fÃ©rÃ©e. Je pense Ã  toi, tout le temps.",
      promise: "Je te promets une chose : je serai lÃ . Dans les bons jours comme dans les jours compliquÃ©s. Je veux te soutenir, te respecter, te faire rire quand tu en as besoin, et te rappeler que tu es incroyable. Je veux construire avec toi, doucement mais sÃ»rement, sans te faire douter de ce que tu vaux. Et si un jour tu te sens triste ou perdue, tu reviens iciâ€¦ et tu te rappelles que je tâ€™aime fort, et que je te choisis, chaque jour.",
      typedPhrases: ["jâ€™ai un truc Ã  te dire","tu es incroyable","tu me manques","je tâ€™aime fort","je te choisis, chaque jour","Apo, tâ€™es mon Ã©vidence"],
      loveMessageHtml: `
        Apo,<br><br>
        Je voulais te dire quelque chose de vrai.<br>
        Avec toi, tout devient plus doux : mes journÃ©es, mes pensÃ©es, ma vie.<br><br>
        Jâ€™aime ta faÃ§on dâ€™Ãªtre, ton sourire, ta prÃ©senceâ€¦ et mÃªme tes petites manies.<br>
        Jâ€™aime nos moments simples, nos dÃ©lires, et cette complicitÃ© quâ€™on a.<br><br>
        Je te promets de te respecter, de te protÃ©ger, et de tâ€™aimer comme tu le mÃ©rites.<br>
        Et si un jour tu doutes de toi, je serai lÃ  pour te rappeler qui tu es : <strong>une fille incroyable.</strong><br><br>
        <strong>Je tâ€™aime fort â¤ï¸</strong>
      `,
      // ğŸ”’ mot de passe
      password: "nadhem&apo",
      passwordHint: "nos prÃ©noms avec &",
      // ğŸ“¸ photos
      usePhotos: true,
      photoPrefix: "photo",
      photoExt: ".jpg"
    };

    const $ = (q) => document.querySelector(q);
    const $$ = (q) => Array.from(document.querySelectorAll(q));

    // Canvas FX
    const canvas = $("#fx");
    const ctx = canvas.getContext("2d");
    let W=0,H=0;
    function resize(){
      W = canvas.width = window.innerWidth * devicePixelRatio;
      H = canvas.height = window.innerHeight * devicePixelRatio;
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
    }
    window.addEventListener("resize", resize);
    resize();

    const hearts = [];
    const sparkles = [];
    const rand=(a,b)=>a+Math.random()*(b-a);
    function floatHearts(x, y, n=10){
  const emojis = ["ğŸ’–","ğŸ’—","ğŸ’“","ğŸ’","ğŸ’•","ğŸ’˜","âœ¨"];
  for(let i=0;i<n;i++){
    const e = document.createElement("div");
    e.className = "float-heart";
    e.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left = (x + (Math.random()*120-60)) + "px";
    e.style.top  = (y + (Math.random()*40-20)) + "px";
    e.style.fontSize = (18 + Math.random()*20) + "px";
    e.style.animationDuration = (1.2 + Math.random()*1.0) + "s";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(), 2200);
  }
}

    function heartPath(x,y,s,rot){
      ctx.save();
      ctx.translate(x,y);
      ctx.rotate(rot);
      ctx.scale(s,s);
      ctx.beginPath();
      ctx.moveTo(0, 0.9);
      ctx.bezierCurveTo(-0.9, 0.2, -0.9, -0.6, 0, -0.25);
      ctx.bezierCurveTo(0.9, -0.6, 0.9, 0.2, 0, 0.9);
      ctx.closePath();
      ctx.restore();
    }
    function spawnHearts(x,y,n=10){
      for(let i=0;i<n;i++){
        hearts.push({
          x:x*devicePixelRatio, y:y*devicePixelRatio,
          vx: rand(-1.25,1.25)*devicePixelRatio,
          vy: rand(-3.6,-1.7)*devicePixelRatio,
          g: rand(0.05,0.11)*devicePixelRatio,
          s: rand(6,14)*devicePixelRatio,
          rot: rand(-0.6,0.6),
          vr: rand(-0.03,0.03),
          life: rand(55,95)
        });
      }
    }
    function spawnSparkle(x,y){
      sparkles.push({
        x:x*devicePixelRatio, y:y*devicePixelRatio,
        vx: rand(-6.2,-3.0)*devicePixelRatio,
        vy: rand(2.2,5.0)*devicePixelRatio,
        life: rand(24,40)
      });
    }
    function burst(n=36){
      spawnHearts(window.innerWidth/2, window.innerHeight*0.32, n);
      for(let i=0;i<10;i++) sparkles.push({x:rand(0,W), y:rand(0,H*0.35), vx:rand(-5.5,-3)*devicePixelRatio, vy:rand(2,4.5)*devicePixelRatio, life:rand(28,45)});
    }
    function loop(){
      ctx.clearRect(0,0,W,H);

      for(let i=sparkles.length-1;i>=0;i--){
        const s = sparkles[i];
        s.x += s.vx; s.y += s.vy; s.life--;
        const a = Math.max(0, Math.min(1, s.life/40));
        ctx.lineWidth = 2.2 * devicePixelRatio;
        ctx.strokeStyle = `rgba(255,255,255,${0.55*a})`;
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x + 18*devicePixelRatio, s.y - 10*devicePixelRatio);
        ctx.stroke();
        if(s.life<=0 || s.x < -80*devicePixelRatio || s.y > H + 80*devicePixelRatio) sparkles.splice(i,1);
      }

      for(let i=hearts.length-1;i>=0;i--){
        const p = hearts[i];
        p.x += p.vx; p.y += p.vy; p.vy += p.g; p.rot += p.vr; p.life--;
        const a = Math.max(0, Math.min(1, p.life/80));
        ctx.fillStyle = `rgba(255, 77, 109, ${0.16*a})`;
        heartPath(p.x, p.y+4*devicePixelRatio, p.s*0.06, p.rot); ctx.fill();
        ctx.fillStyle = `rgba(255, 122, 162, ${0.85*a})`;
        heartPath(p.x, p.y, p.s*0.06, p.rot); ctx.fill();
        if(p.life<=0 || p.y > H + 60*devicePixelRatio) hearts.splice(i,1);
      }

      requestAnimationFrame(loop);
    }
    loop();

    // INIT + GATE (aprÃ¨s chargement)
    window.addEventListener("DOMContentLoaded", () => {
      $("#brandText").textContent = CONFIG.brandText;
      $("#toName").textContent = CONFIG.toName;
      $("#pairA").textContent = CONFIG.toName;
      $("#pairB").textContent = CONFIG.fromName;
      $("#subtitle").textContent = CONFIG.subtitle;
      $("#quickNote").textContent = CONFIG.quickNote;
      $("#promise").textContent = CONFIG.promise;
      $("#sig").textContent = CONFIG.fromName;
      $("#loveBody").innerHTML = CONFIG.loveMessageHtml;

      // Modal
      const overlay = $("#overlay");
      $("#btnOpen").addEventListener("click", ()=>{ overlay.classList.add("show"); burst(40); });
      $("#btnClose").addEventListener("click", ()=> overlay.classList.remove("show"));
      overlay.addEventListener("click", (e)=>{ if(e.target===overlay) overlay.classList.remove("show"); });

      $("#btnScroll").addEventListener("click", ()=> window.scrollTo({top: window.innerHeight*0.9, behavior:"smooth"}));

      // Typewriter
      const typedEl = $("#typed");
      let pi=0, ci=0, del=false;
      (function tick(){
        const phrase = CONFIG.typedPhrases[pi % CONFIG.typedPhrases.length];
        if(!del){
          ci++; typedEl.textContent = phrase.slice(0,ci);
          if(ci>=phrase.length){ del=true; setTimeout(tick, 1100); return; }
        } else {
          ci--; typedEl.textContent = phrase.slice(0,ci);
          if(ci<=0){ del=false; pi++; }
        }
        setTimeout(tick, del?35:52);
      })();

      // Photos
      if(CONFIG.usePhotos){
        $$(".ph").forEach((el)=>{
          const i = el.getAttribute("data-i");
          const url = `${CONFIG.photoPrefix}${i}${CONFIG.photoExt}?v=${Date.now()}`;
          el.style.borderStyle = "solid";
          el.style.borderColor = "rgba(255,255,255,.14)";
          el.style.background = `url('${url}') center/cover no-repeat`;
          el.textContent = "";
        });
      }

      // Gate
      const gate = $("#gate");
      const gateInput = $("#gateInput");
      const gateBtn = $("#gateBtn");
      const gateHint = $("#gateHint");
      const gateError = $("#gateError");
      $("#gateName").textContent = CONFIG.toName;
      gateHint.textContent = "Indice : " + (CONFIG.passwordHint || "");

      // bloque le scroll tant que c'est fermÃ©
      document.body.style.overflow = "hidden";

      function clean(s){
        return (s||"").toLowerCase().normalize("NFKC").trim().replace(/[^a-z0-9]/g,"");
      }
      function unlock(){
        document.body.style.overflow = "";
        gate.classList.add("fadeOut");
        setTimeout(()=> gate.classList.add("hide"), 520);
        burst(80);
      }
      function deny(){
        gateError.textContent = "Mot de passe incorrect ğŸ˜…";
        gate.classList.remove("shake"); void gate.offsetWidth; gate.classList.add("shake");
        spawnHearts(window.innerWidth/2, window.innerHeight*0.55, 18);
        spawnSparkle(window.innerWidth/2, window.innerHeight*0.55);
      }
      function check(){
        const v = clean(gateInput.value);
        const p = clean(CONFIG.password); // "nadhem&apo" => "nadhemapo"
        if(v === p) unlock(); else deny();
      }
      gateBtn.addEventListener("click", check);
      gateInput.addEventListener("keydown", (e)=>{ if(e.key==="Enter") check(); });

      // clic Ã©cran = cÅ“urs
      window.addEventListener("pointerdown", (e)=>{
        if(!gate.classList.contains("hide")) return; // pas avant dÃ©verrouillage
        spawnHearts(e.clientX, e.clientY, 14);
        if(Math.random()<0.55) spawnSparkle(e.clientX, e.clientY);
      });

      // bouton cÅ“urs
      $("#btnHearts").addEventListener("click", ()=>{
  burst(70);
  floatHearts(window.innerWidth/2, window.innerHeight*0.45, 14);
});

      // musique : essaye music.mp3 si prÃ©sent, sinon fait juste rien (safe)
      const audio = $("#musicFile");
      let playing = false;
      $("#btnMusic").addEventListener("click", async ()=>{
        if(!gate.classList.contains("hide")) return; // seulement aprÃ¨s dÃ©verrouillage
        try{
          if(!playing){
            await audio.play();
            playing = true;
          } else {
            audio.pause();
            playing = false;
          }
        } catch {
          // si music.mp3 n'existe pas ou bloquÃ©, rien
        }
      });

      // petit burst au dÃ©marrage (derriÃ¨re le portail)
      setTimeout(()=>burst(24), 400);
    });
  </script>
</body>
</html>
